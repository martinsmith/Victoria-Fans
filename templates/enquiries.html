{% extends "_layout" %}


{% block content %}
      <section class="content">
        <div class="width">

          <header>
            <h1>{{ entry.title }}</h1>
          </header>

          {% macro errorList(errors) %}
            {% if errors %}
                <span class="errors">
                    {% for error in errors %}
                       {{ error }}
                    {% endfor %}
                </span>
            {% endif %}
          {% endmacro %}

          {# Display flash messages #}
          {% if craft.app.session.hasFlash('success') %}
              <p class="submit-notification">{{ craft.app.session.getFlash('success') }}</p>
          {% elseif craft.app.session.hasFlash('error') %}
              <p class="submit-notification error">{{ craft.app.session.getFlash('error') }}</p>
          {% else %}

          {# Get any previous submission for error display #}
          {% set submission = submission ?? null %}

          <form class="mainComms enquiries" method="post" action="" accept-charset="UTF-8" id="check">
            {{ csrfInput() }}
            {{ actionInput('contact-form/send') }}
            {{ redirectInput('enquiries?success=1') }}

            {# Honeypot field for spam protection - hidden from real users, bots will fill it in #}
            <div style="display:none;">
                <label for="vfWebsite">Leave this field empty</label>
                <input type="text" id="vfWebsite" name="vfWebsite" value="">
            </div>

              <fieldset>
              <div class="field">
              <label for="fromName">Your Name</label>
                {{ input('text', 'fromName', submission.fromName ?? '', {
                    id: 'fromName',
                    placeholder: 'Your Name',
                    autocomplete: 'name',
                }) }}
                {% if submission %}
                    {{ _self.errorList(submission.getErrors('fromName')) }}
                {% endif %}
              </div>

              <div class="field">
              <label for="fromEmail">Email Address</label>
                {{ input('email', 'fromEmail', submission.fromEmail ?? '', {
                    id: 'fromEmail',
                    placeholder: 'Your Email Address',
                    autocomplete: 'email',
                }) }}
                {% if submission %}
                    {{ _self.errorList(submission.getErrors('fromEmail')) }}
                {% endif %}
              </div>

              <div class="field">
              <label for="subject">Subject</label>
                {{ input('text', 'subject', submission.subject ?? '', {
                    id: 'subject',
                    placeholder: 'Subject of your enquiry',
                }) }}
                {% if submission %}
                    {{ _self.errorList(submission.getErrors('subject')) }}
                {% endif %}
              </div>

              <div class="field">
              <label for="phone">Phone Number</label>
                {{ input('text', 'message[Phone]', submission.message.Phone ?? '', {
                    id: 'phone',
                    placeholder: 'Your Phone Number',
                    autocomplete: 'tel',
                }) }}
              </div>

              <div class="field">
              <label for="message">Your Enquiry</label>
                {{ tag('textarea', {
                    text: submission.message.body ?? '',
                    id: 'message',
                    name: 'message[body]',
                    rows: 10,
                    placeholder: 'Your Message to us',
                }) }}
                {% if submission %}
                    {{ _self.errorList(submission.getErrors('message')) }}
                {% endif %}
              </div>

              <div class="field">
                <button type="submit">Send Enquiry</button>
              </div>
              </fieldset>
            </form>
          {% endif %}
        </div>
      </section>



{% endblock %}
